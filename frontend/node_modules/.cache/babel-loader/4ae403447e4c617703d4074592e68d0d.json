{"ast":null,"code":"import _slicedToArray from\"/home/jadson/Downloads/repositories/PAINEL/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import OAuth from'oauth';import config from'../../config';import Time from'../Time';import Price from'../Price';import'./style.css';function Weather(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),weather=_useState2[0],setWeather=_useState2[1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),update=_useState4[0],setUpdate=_useState4[1];useEffect(function(){/* https://developer.yahoo.com/weather/documentation.html#oauth-nodejs */function getDada(){var header={\"X-Yahoo-App-Id\":config.weather.appID,\"Access-Control-Request-Method\":\"GET\",\"Access-Control-Request-Headers\":\"X-PINGOTHER, Content-Type\"};var request=new OAuth.OAuth(null,null,config.weather.clientID,config.weather.clientSecret,'1.0',null,'HMAC-SHA1',null,header);request.get('https://weather-ydn-yql.media.yahoo.com/forecastrss?location=florianópolis&u=c&format=json',null,null,function(err,data,result){if(err){console.log(err);}else{var _JSON$parse=JSON.parse(data),forecasts=_JSON$parse.forecasts;var state=[];forecasts.forEach(function(item){switch(item.day){case\"Mon\":state.push({code:item.code,day:\"Segunda\"});break;case\"Tue\":state.push({code:item.code,day:\"Terça\"});break;case\"Wed\":state.push({code:item.code,day:\"Quarta\"});break;case\"Thu\":state.push({code:item.code,day:\"Quinta\"});break;case\"Fri\":state.push({code:item.code,day:\"Sexta\"});break;case\"Sat\":state.push({code:item.code,day:\"Sábado\"});break;case\"Sun\":state.push({code:item.code,day:\"Domingo\"});break;default:break;}});setWeather(state);}});}getDada();},[update]);useEffect(function(){var interval=setInterval(function(){setUpdate(function(update){return update+1;});},50000);return function(){return clearInterval(interval);};},[]);return/*#__PURE__*/React.createElement(\"div\",{className:\"containerWeather\"},/*#__PURE__*/React.createElement(Time,null),/*#__PURE__*/React.createElement(\"ul\",{className:\"containerlist\"},weather.map(function(weatherday){return/*#__PURE__*/React.createElement(\"li\",{key:Math.random()*100,className:\"item-list\"},/*#__PURE__*/React.createElement(\"p\",null,weatherday.day),/*#__PURE__*/React.createElement(\"img\",{src:\"https://web.archive.org/web/20200529100011if_/http://l.yimg.com/a/i/us/we/52/\".concat(weatherday.code,\".gif\"),alt:weatherday.text}));})),/*#__PURE__*/React.createElement(Price,null));}export default Weather;","map":{"version":3,"sources":["/home/jadson/Downloads/repositories/PAINEL/frontend/src/components/Weather/index.js"],"names":["React","useState","useEffect","OAuth","config","Time","Price","Weather","weather","setWeather","update","setUpdate","getDada","header","appID","request","clientID","clientSecret","get","err","data","result","console","log","JSON","parse","forecasts","state","forEach","item","day","push","code","interval","setInterval","clearInterval","map","weatherday","Math","random","text"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react'\nimport OAuth from 'oauth'\nimport config from '../../config'\nimport Time from '../Time'\nimport Price from '../Price'\n\nimport './style.css'\n\n\nfunction Weather() {\n  const [weather, setWeather] = useState([])\n  const [update, setUpdate] = useState(0)\n\n\n  useEffect(() => {\n    /* https://developer.yahoo.com/weather/documentation.html#oauth-nodejs */\n    function getDada() {\n\n      const header = {\n        \"X-Yahoo-App-Id\": config.weather.appID,\n        \"Access-Control-Request-Method\": \"GET\",\n        \"Access-Control-Request-Headers\": \"X-PINGOTHER, Content-Type\"\n      };\n      \n      const request = new OAuth.OAuth(\n        null,\n        null,\n        config.weather.clientID,\n        config.weather.clientSecret,\n        '1.0',\n        null,\n        'HMAC-SHA1',\n        null,\n        header\n      );\n    \n      request.get(\n        'https://weather-ydn-yql.media.yahoo.com/forecastrss?location=florianópolis&u=c&format=json',\n        null,\n        null,\n        function (err, data, result) {\n          if (err) {\n            console.log(err);\n          } else {\n            const { forecasts } = JSON.parse(data)\n            const state = []\n\n            forecasts.forEach(item => {\n\n              switch (item.day) {\n                case \"Mon\":\n                  state.push({ code: item.code, day: \"Segunda\" })\n                  break;\n                case \"Tue\":\n                  state.push({ code: item.code, day: \"Terça\" })\n                  break;\n                case \"Wed\":\n                  state.push({ code: item.code, day: \"Quarta\" })\n                  break;\n                case \"Thu\":\n                  state.push({ code: item.code, day: \"Quinta\" })\n                  break;\n                case \"Fri\":\n                  state.push({ code: item.code, day: \"Sexta\" })\n                  break;\n                case \"Sat\":\n                  state.push({ code: item.code, day: \"Sábado\" })\n                  break;\n                case \"Sun\":\n                  state.push({ code: item.code, day: \"Domingo\" })\n                  break;\n                default:\n                  break;\n              }\n\n            });\n\n            setWeather(state)\n\n          }\n        }\n      );\n    }\n    getDada()\n  }, [update])\n\n  useEffect(() => {\n    const interval = setInterval(() => {\n      setUpdate(update => update + 1);\n    }, 50000);\n    return () => clearInterval(interval);\n  }, []);\n  \n\n\n  return (\n\n    <div className=\"containerWeather\" >\n      <Time/>\n      <ul className=\"containerlist\">\n        {\n          weather.map(weatherday => (\n\n            <li key={Math.random() * 100}  className=\"item-list\">\n              <p>{weatherday.day}</p>\n              <img src={`https://web.archive.org/web/20200529100011if_/http://l.yimg.com/a/i/us/we/52/${weatherday.code}.gif`} alt={weatherday.text} />\n            </li>\n\n          ))\n        }\n      </ul>\n      <Price/>\n    </div>\n  )\n}\n\nexport default Weather\n\n"]},"metadata":{},"sourceType":"module"}