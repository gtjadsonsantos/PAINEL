# Cria containers isolados do backend e frontend

version: "3.3"
services: 
    backend: 
        build: ./backend
        volumes: 
            - painel-ceu-backend:/backend
        ports: 
            - 3333:3333
        user: node
        restart: always
            
    frontend:
        build: ./frontend
        volumes: 
            - ./config.js:/frontend/src/config.js
        ports:
            - 8080:8080
        command: > 
            sh -c "yarn build &&    
                   node index.js"
        depends_on: 
            - backend
        restart: always
        
volumes:
    painel-ceu-backend: